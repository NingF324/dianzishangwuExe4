{% extends "base.html" %}
{% block title %}CompkeySys{% endblock %}
{% block head %}
<!-- TODO:引入需要引入的头文件等 -->
<link rel="stylesheet" href="../static/css/new_register.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
<title>Login CompkeySys</title>
{% endblock %}
{% block body %}
<section>
<div class="wrapper">
  <div class="container main">
    <div class="row_login" style="width: 450px">
      <div class="col-md-6 right" style="width: 100%">
          <form class="input-box" method="post" action="user/register">
            <header>注册</header>
            <header class="subtitle" id="flag"></header>
            <div id="new_container">
                <div class="input-field">
                <input type="text" class="input" name="username" id="username" required autocomplete="off">
                <label for="username">用户名</label>
                </div>
                <div class="input-field">
                <input type="password" class="input" name="password" id="password" required>
                <label for="password">密码</label>
                </div>
                <div class="input-field">
                <input type="text" class="input" name="email" id="email" required>
                <label for="email">邮箱</label>
                </div>
                <div class="input-field">
                <input type="text" class="input" name="telephone" id="telephone" required>
                <label for="telephone">手机号</label>
                </div>
            </div>
            <div class="input-field">
                <input type="submit" id="login-usual" class="submit" value="注册">
            </div>
          <div class="signin">
            <span>注册完了？去登陆<a href="/login">  点击登陆</a></span>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<script  th:src="@{/js/jquery.min.js}" type="text/javascript"></script>
<script  th:src="@{/js/Getface.js}" type="text/javascript"></script>

<script>
  isEmail=false;
  isPhone=false;

  function isPoneAvailable($poneInput) {
    var myreg=/^[1][3,4,5,7,8][0-9]{9}$/;
    if (!myreg.test($poneInput)) {
      return false;
    } else {
      return true;
    }
  }

  var pattern= /^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;
  $("#email").blur(function(){
    var strEmail=pattern.test($("#email").val());
    if(strEmail==true){
      isEmail=true;
    }
    var strPhone=isPoneAvailable($("#email").val());
    if(strPhone==true){
      isPhone=true;
    }
    if(isEmail==false&&isPhone==false){
      $(".sub-title").html("阿勒 是不是输错了");
    }
  });

  $(function(){
    $(".getface").hide();
  })
</script>
</section>
{% endblock %}